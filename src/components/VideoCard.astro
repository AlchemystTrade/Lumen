---
interface Props {
	title: string;
	source: string;
	sourceUrl?: string;
	description: string;
	questions: string[];
	videoUrl: string; // Embed URL
}

const { title, source, sourceUrl, description, questions, videoUrl } = Astro.props;
---

<article class="video-card">
	<header class="card-header">
		<h3 class="video-title">{title}</h3>
		<p class="video-source">
			Source: {sourceUrl ? <a href={sourceUrl} target="_blank" rel="noopener noreferrer">{source}</a> : source}
		</p>
	</header>

	<div class="video-container">
		<iframe 
			src={videoUrl} 
			title={title}
			frameborder="0" 
			allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
			referrerpolicy="strict-origin-when-cross-origin" 
			allowfullscreen>
		</iframe>
	</div>

	<div class="video-info">
		<p class="description">{description}</p>
		
		{questions.length > 0 && (
			<div class="reflection">
				<h4>Questions for reflection</h4>
				<ul>
					{questions.map((q) => <li>{q}</li>)}
				</ul>
			</div>
		)}
	</div>
</article>

<style>
	.video-card {
		margin-bottom: 5rem;
		padding-bottom: 3rem;
		border-bottom: 1px solid var(--border-color);
	}

	.video-card:last-child {
		border-bottom: none;
	}

	.card-header {
		margin-bottom: 1.5rem;
	}

	.video-title {
		font-size: 1.75rem;
		margin: 0 0 0.5rem 0;
	}

	.video-source {
		font-size: 0.85rem;
		color: var(--muted-text);
		margin: 0;
	}

	.video-container {
		position: relative;
		padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
		height: 0;
		overflow: hidden;
		background-color: #000;
		margin: 1.5rem 0;
	}

	.video-container iframe {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
	}

	.video-info {
		margin-top: 1.5rem;
	}

	.description {
		font-size: 1.1rem;
		margin-bottom: 2rem;
	}

	.reflection {
		background-color: #f5f5f5; /* Very subtle contrast for the reflection box */
		padding: 1.5rem;
		border-left: 3px solid var(--border-color);
	}

	.reflection h4 {
		font-family: var(--font-sans); /* Use a less formal font for the subhead if needed */
		font-weight: 600;
		font-size: 0.9rem;
		text-transform: uppercase;
		letter-spacing: 0.05rem;
		margin: 0 0 1rem 0;
		color: var(--muted-text);
	}

	.reflection ul {
		margin: 0;
		padding-left: 1.2rem;
		font-size: 0.95rem;
		color: var(--text-color);
	}

	.reflection li {
		margin-bottom: 0.5rem;
	}
</style>
